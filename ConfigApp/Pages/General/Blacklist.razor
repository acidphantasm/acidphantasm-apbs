@page "/blacklisting"
@inherits LayoutComponentBase
@inject ISnackbar Snackbar
@using static Core.DataLoader;
@using static Core.Utils;
@using APBSConfig.Shared;

<style>
    .mud-divider {
        border-width: 2.5px;
    }
</style>

<MudMainContent>
    <MudContainer>
        <MudTabs Centered="true" Elevation="2" Rounded="true" ApplyEffectsToContainer="true" PanelClass="pa-6 ma-2">
            <MudTabPanel Text="Weapon Blacklists">
                <MudGrid>
                    
                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-2">
                            <MudTooltip Text="Only valid MongoIDs are accepted. Enter the ID of the weapon you want blacklisted, then click the arrow (or press enter) to add it to the blacklist." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                <MudIconButton Icon="@Icons.Material.Filled.Warning" />
                            </MudTooltip>
                            <MudText Align="Align.Center">Tier 1</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier1WeaponBlacklistEntry"
                                Typo="Typo.body2" HelperText="Enter valid MongoID"
                                Placeholder="ItemID"
                                Variant="Variant.Text" 
                                OnKeyDown="@((e) => HandleKeyDown(e, tier1WeaponBlacklistEntry, Data.weaponBlacklist.tier1Blacklist))"
                                Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))" 
                                Immediate="true"
                                Adornment="Adornment.End"
                                AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                OnAdornmentClick="@(() => AddItemToList(tier1WeaponBlacklistEntry, Data.weaponBlacklist.tier1Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.weaponBlacklist.tier1Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.weaponBlacklist.tier1Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3"/>

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 2</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier2WeaponBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier2WeaponBlacklistEntry, Data.weaponBlacklist.tier2Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier2WeaponBlacklistEntry, Data.weaponBlacklist.tier2Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.weaponBlacklist.tier2Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.weaponBlacklist.tier2Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 3</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier3WeaponBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier3WeaponBlacklistEntry, Data.weaponBlacklist.tier3Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier3WeaponBlacklistEntry, Data.weaponBlacklist.tier3Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.weaponBlacklist.tier3Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.weaponBlacklist.tier3Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 4</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier4WeaponBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier4WeaponBlacklistEntry, Data.weaponBlacklist.tier4Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier4WeaponBlacklistEntry, Data.weaponBlacklist.tier4Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.weaponBlacklist.tier4Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.weaponBlacklist.tier4Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 5</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier5WeaponBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier5WeaponBlacklistEntry, Data.weaponBlacklist.tier5Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier5WeaponBlacklistEntry, Data.weaponBlacklist.tier5Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.weaponBlacklist.tier5Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.weaponBlacklist.tier5Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 6</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier6WeaponBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier6WeaponBlacklistEntry, Data.weaponBlacklist.tier6Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier6WeaponBlacklistEntry, Data.weaponBlacklist.tier6Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.weaponBlacklist.tier6Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.weaponBlacklist.tier6Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3"/>

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 7</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier7WeaponBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier7WeaponBlacklistEntry, Data.weaponBlacklist.tier7Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier7WeaponBlacklistEntry, Data.weaponBlacklist.tier7Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.weaponBlacklist.tier7Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.weaponBlacklist.tier7Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                </MudGrid>

            </MudTabPanel>
            <MudTabPanel Text="Equipment Blacklists">

                <MudGrid>
                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-2">
                            <MudTooltip Text="Only valid MongoIDs are accepted. Enter the ID of the weapon you want blacklisted, then click the arrow (or press enter) to add it to the blacklist." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                <MudIconButton Icon="@Icons.Material.Filled.Warning" />
                            </MudTooltip>
                            <MudText Align="Align.Center">Tier 1</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier1EquipmentBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier1EquipmentBlacklistEntry, Data.equipmentBlacklist.tier1Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier1EquipmentBlacklistEntry, Data.equipmentBlacklist.tier1Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.equipmentBlacklist.tier1Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.equipmentBlacklist.tier1Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 2</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier2EquipmentBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier2EquipmentBlacklistEntry, Data.equipmentBlacklist.tier2Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier2EquipmentBlacklistEntry, Data.equipmentBlacklist.tier2Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.equipmentBlacklist.tier2Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.equipmentBlacklist.tier2Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 3</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier3EquipmentBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier3EquipmentBlacklistEntry, Data.equipmentBlacklist.tier3Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier3EquipmentBlacklistEntry, Data.equipmentBlacklist.tier3Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.equipmentBlacklist.tier3Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.equipmentBlacklist.tier3Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 4</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier4EquipmentBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier4EquipmentBlacklistEntry, Data.equipmentBlacklist.tier4Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier4EquipmentBlacklistEntry, Data.equipmentBlacklist.tier4Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.equipmentBlacklist.tier4Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.equipmentBlacklist.tier4Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 5</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier5EquipmentBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier5EquipmentBlacklistEntry, Data.equipmentBlacklist.tier5Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier5EquipmentBlacklistEntry, Data.equipmentBlacklist.tier5Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.equipmentBlacklist.tier5Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.equipmentBlacklist.tier5Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 6</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier6EquipmentBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier6EquipmentBlacklistEntry, Data.equipmentBlacklist.tier6Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier6EquipmentBlacklistEntry, Data.equipmentBlacklist.tier6Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.equipmentBlacklist.tier6Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.equipmentBlacklist.tier6Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 7</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier7EquipmentBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier7EquipmentBlacklistEntry, Data.equipmentBlacklist.tier7Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier7EquipmentBlacklistEntry, Data.equipmentBlacklist.tier7Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.equipmentBlacklist.tier7Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.equipmentBlacklist.tier7Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>
                </MudGrid>

            </MudTabPanel>
            <MudTabPanel Text="Ammo Blacklists">

                <MudGrid>
                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-2">
                            <MudTooltip Text="Only valid MongoIDs are accepted. Enter the ID of the weapon you want blacklisted, then click the arrow (or press enter) to add it to the blacklist." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                <MudIconButton Icon="@Icons.Material.Filled.Warning" />
                            </MudTooltip>
                            <MudText Align="Align.Center">Tier 1</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier1AmmoBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier1AmmoBlacklistEntry, Data.ammoBlacklist.tier1Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier1AmmoBlacklistEntry, Data.ammoBlacklist.tier1Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.ammoBlacklist.tier1Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.ammoBlacklist.tier1Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 2</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier2AmmoBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier2AmmoBlacklistEntry, Data.ammoBlacklist.tier2Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier2AmmoBlacklistEntry, Data.ammoBlacklist.tier2Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.ammoBlacklist.tier2Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.ammoBlacklist.tier2Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 3</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier3AmmoBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier3AmmoBlacklistEntry, Data.ammoBlacklist.tier3Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier3AmmoBlacklistEntry, Data.ammoBlacklist.tier3Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.ammoBlacklist.tier3Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.ammoBlacklist.tier3Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 4</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier4AmmoBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier4AmmoBlacklistEntry, Data.ammoBlacklist.tier4Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier4AmmoBlacklistEntry, Data.ammoBlacklist.tier4Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.ammoBlacklist.tier4Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.ammoBlacklist.tier4Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 5</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier5AmmoBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier5AmmoBlacklistEntry, Data.ammoBlacklist.tier5Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier5AmmoBlacklistEntry, Data.ammoBlacklist.tier5Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.ammoBlacklist.tier5Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.ammoBlacklist.tier5Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 6</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier6AmmoBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier6AmmoBlacklistEntry, Data.ammoBlacklist.tier6Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier6AmmoBlacklistEntry, Data.ammoBlacklist.tier6Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.ammoBlacklist.tier6Blacklist)
                        {
                            <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.ammoBlacklist.tier6Blacklist))" Color="Color.Default">@item</MudChip>
                        }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 7</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier7AmmoBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier7AmmoBlacklistEntry, Data.ammoBlacklist.tier7Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier7AmmoBlacklistEntry, Data.ammoBlacklist.tier7Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
						@foreach (var item in Data.ammoBlacklist.tier7Blacklist)
						{
							<MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.ammoBlacklist.tier7Blacklist))" Color="Color.Default">@item</MudChip>
						}
                    </MudItem>
                </MudGrid>

            </MudTabPanel>
            <MudTabPanel Text="Attachment Blacklists">

                <MudGrid>
                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-2">
                            <MudTooltip Text="Only valid MongoIDs are accepted. Enter the ID of the weapon you want blacklisted, then click the arrow (or press enter) to add it to the blacklist." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                <MudIconButton Icon="@Icons.Material.Filled.Warning" />
                            </MudTooltip>
                            <MudText Align="Align.Center">Tier 1</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier1AttachmentBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier1AttachmentBlacklistEntry, Data.attachmentBlacklist.tier1Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier1AttachmentBlacklistEntry, Data.attachmentBlacklist.tier1Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.attachmentBlacklist.tier1Blacklist)
						{
							<MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.attachmentBlacklist.tier1Blacklist))" Color="Color.Default">@item</MudChip>
						}
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 2</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier2AttachmentBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier2AttachmentBlacklistEntry, Data.attachmentBlacklist.tier2Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier2AttachmentBlacklistEntry, Data.attachmentBlacklist.tier2Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.attachmentBlacklist.tier2Blacklist)
                            {
                                <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.attachmentBlacklist.tier2Blacklist))" Color="Color.Default">@item</MudChip>
                            }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 3</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier3AttachmentBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier3AttachmentBlacklistEntry, Data.attachmentBlacklist.tier3Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier3AttachmentBlacklistEntry, Data.attachmentBlacklist.tier3Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.attachmentBlacklist.tier3Blacklist)
                            {
                                <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.attachmentBlacklist.tier3Blacklist))" Color="Color.Default">@item</MudChip>
                            }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 4</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier4AttachmentBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier4AttachmentBlacklistEntry, Data.attachmentBlacklist.tier4Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier4AttachmentBlacklistEntry, Data.attachmentBlacklist.tier4Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.attachmentBlacklist.tier4Blacklist)
                            {
                                <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.attachmentBlacklist.tier4Blacklist))" Color="Color.Default">@item</MudChip>
                            }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 5</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier5AttachmentBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier5AttachmentBlacklistEntry, Data.attachmentBlacklist.tier5Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier5AttachmentBlacklistEntry, Data.attachmentBlacklist.tier5Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.attachmentBlacklist.tier5Blacklist)
                            {
                                <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.attachmentBlacklist.tier5Blacklist))" Color="Color.Default">@item</MudChip>
                            }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 6</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier6AttachmentBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier6AttachmentBlacklistEntry, Data.attachmentBlacklist.tier6Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier6AttachmentBlacklistEntry, Data.attachmentBlacklist.tier6Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.attachmentBlacklist.tier6Blacklist)
                            {
                                <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.attachmentBlacklist.tier6Blacklist))" Color="Color.Default">@item</MudChip>
                            }
                    </MudItem>

                    <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                    <MudItem xs="2">
                        <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-3">
                            <MudText Align="Align.Center">Tier 7</MudText>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="3" Class="align-center">
                        <MudTextField T="string" @bind-Value="tier7AttachmentBlacklistEntry"
                                      Typo="Typo.body2" HelperText="Enter valid MongoID"
                                      Placeholder="ItemID"
                                      Variant="Variant.Text"
                                      OnKeyDown="@((e) => HandleKeyDown(e, tier7AttachmentBlacklistEntry, Data.attachmentBlacklist.tier7Blacklist))"
                                      Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                      Immediate="true"
                                      Adornment="Adornment.End"
                                      AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                      OnAdornmentClick="@(() => AddItemToList(tier7AttachmentBlacklistEntry, Data.attachmentBlacklist.tier7Blacklist))" />
                    </MudItem>
                    <MudItem xs="7">
                        @foreach (var item in Data.attachmentBlacklist.tier7Blacklist)
                            {
                                <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.attachmentBlacklist.tier7Blacklist))" Color="Color.Default">@item</MudChip>
                            }
                    </MudItem>
                </MudGrid>

            </MudTabPanel>
        </MudTabs>
    </MudContainer>
</MudMainContent>

@code
{
    private string tier1WeaponBlacklistEntry { get; set; } = "";
    private string tier2WeaponBlacklistEntry { get; set; } = "";
    private string tier3WeaponBlacklistEntry { get; set; } = "";
    private string tier4WeaponBlacklistEntry { get; set; } = "";
    private string tier5WeaponBlacklistEntry { get; set; } = "";
    private string tier6WeaponBlacklistEntry { get; set; } = "";
    private string tier7WeaponBlacklistEntry { get; set; } = "";

    private string tier1EquipmentBlacklistEntry { get; set; } = "";
    private string tier2EquipmentBlacklistEntry { get; set; } = "";
    private string tier3EquipmentBlacklistEntry { get; set; } = "";
    private string tier4EquipmentBlacklistEntry { get; set; } = "";
    private string tier5EquipmentBlacklistEntry { get; set; } = "";
    private string tier6EquipmentBlacklistEntry { get; set; } = "";
    private string tier7EquipmentBlacklistEntry { get; set; } = "";

    private string tier1AmmoBlacklistEntry { get; set; } = "";
    private string tier2AmmoBlacklistEntry { get; set; } = "";
    private string tier3AmmoBlacklistEntry { get; set; } = "";
    private string tier4AmmoBlacklistEntry { get; set; } = "";
    private string tier5AmmoBlacklistEntry { get; set; } = "";
    private string tier6AmmoBlacklistEntry { get; set; } = "";
    private string tier7AmmoBlacklistEntry { get; set; } = "";

    private string tier1AttachmentBlacklistEntry { get; set; } = "";
    private string tier2AttachmentBlacklistEntry { get; set; } = "";
    private string tier3AttachmentBlacklistEntry { get; set; } = "";
    private string tier4AttachmentBlacklistEntry { get; set; } = "";
    private string tier5AttachmentBlacklistEntry { get; set; } = "";
    private string tier6AttachmentBlacklistEntry { get; set; } = "";
    private string tier7AttachmentBlacklistEntry { get; set; } = "";

    #region INPUT HANDLING
    private void HandleKeyDown(KeyboardEventArgs e, string value, List<string> list)
    {
        if (e.Key == "Enter" && !e.ShiftKey)
        {
            AddItemToList(value, list);
        }
    }

    private void AddItemToList(string value, List<string> list)
    {      
        if (value != null)
        {
            bool containsAlready = list.FirstOrDefault(s => s.Contains(value)) == value ? true : false;
            if (!containsAlready && Utils.IsHexAndValidLength(value))
            {
                list.Add(value);
                MainLayout.EnableUnsavedChangesButton();
            }
            else if (containsAlready)
            {
                Snackbar.Add("Already blacklisted.", Severity.Error, config => { config.ShowCloseIcon = false; });
            }
            else
            {
                Snackbar.Add("Invalid MongoID.", Severity.Error, config => { config.ShowCloseIcon = false; });
            }
        }
    }

    private void OnChipClosed(string item, List<string> list)
    {
        if (item != null)
        {
            list.Remove(item);
            MainLayout.EnableUnsavedChangesButton();
        }
    }
    #endregion
    
    #region CASCADING PARAMETERS
    [CascadingParameter] public APBSConfig.Shared.MainLayout? Layout { get; set; }
    #endregion
}