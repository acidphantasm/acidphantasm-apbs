@page "/scav"
@inherits LayoutComponentBase
@inject ISnackbar Snackbar
@using static Core.DataLoader;

<style>
    .mud-divider {
        border-width: 2.5px;
    }
</style>

<MudMainContent>
    <MudContainer>
        <MudExpansionPanels MultiExpansion="true">
            <MudExpansionPanel Class="mud-expansion-panels-borders ma-3 pa-5" Text="Scav Specific Configuration" Expanded=true>
                <MudGrid>

                    <MudItem xs="1">
                        <MudPaper Class="d-flex justify-center mud-width-full ma-1" Elevation="0">
                            <MudTooltip Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                <ChildContent>
                                    <MudIconButton Icon="@Icons.Material.Filled.Warning" Size="Size.Small" />
                                </ChildContent>
                                <TooltipContent>
                                    <MudText Typo="Typo.body2">All settings on this page, and any other setting that may impact these bots are controlled by this toggle.</MudText>
                                    <MudText Typo="Typo.body2">EXCEPTION: Normalize Health is always applied if enabled but not excluded.</MudText>
                                </TooltipContent>
                            </MudTooltip>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="4">
                        <MudPaper Class="d-flex align-center mud-width-full ma-1" Elevation="0">
                            <MudTooltip Text="Grants APBS control over Raiders, Rogues, Cultists, and Bloodhounds. You will have vanilla versions of these bots if disabled." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                <MudText>Enable Scav Bot Generation</MudText>
                            </MudTooltip>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="6">
                        <MudPaper Class="d-flex align-center mud-width-full" Elevation="0">
                            <MudSwitch T="bool" @bind-Value="_enableScavBots" Color="Color.Success" UncheckedColor="Color.Error" LabelPlacement="Placement.End">@_enableScavBots</MudSwitch>
                        </MudPaper>
                    </MudItem>
                    <MudItem xs="1">
                        <MudButton @onclick="resetScavBots" Variant="Variant.Filled" Color="Color.Dark" Size="Size.Small">Reset</MudButton>
                    </MudItem>

                </MudGrid>
            </MudExpansionPanel>
            @if (_enableScavBots)
            {
                <MudExpansionPanel Class="mud-expansion-panels-borders ma-3 pa-5" Text="Scav Specific Options" Expanded=true>
                    <MudGrid>

                        <MudItem xs="1" />
                        <MudItem xs="4">
                            <MudPaper Class="d-flex align-center mud-width-full ma-1" Elevation="0">
                                <MudTooltip Text="Allows Scav Bots to spawn with additional loot." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                    <MudText>Enable Loot</MudText>
                                </MudTooltip>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="6">
                            <MudPaper Class="d-flex align-center mud-width-full" Elevation="0">
                                <MudSwitch T="bool" @bind-Value="@_enableLoot" Color="Color.Success" UncheckedColor="Color.Error" LabelPlacement="Placement.End">@_enableLoot</MudSwitch>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="1">
                            <MudButton @onclick="resetLoot" Variant="Variant.Filled" Color="Color.Dark" Size="Size.Small">Reset</MudButton>
                        </MudItem>

                        <MudItem xs="1">
                            <MudPaper Class="d-flex flex-column align-center justify-center mud-width-full py-2">
                                <MudTooltip Text="Only valid MongoIDs are accepted. Enter the ID of the weapon you want blacklisted, then click the arrow (or press enter) to add it to the blacklist." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                    <MudIconButton Icon="@Icons.Material.Filled.Warning" Size="Size.Small" />
                                </MudTooltip>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="4" Class="align-center">
                            <MudTextField T="string" @bind-Value="@_lootBlacklistEntryHolder"
                                          Typo="Typo.body2" HelperText="Enter valid MongoID"
                                          Placeholder="ItemID"
                                          Variant="Variant.Text"
                                          OnKeyDown="@((e) => HandleKeyDown(e, _lootBlacklistEntryHolder, Data.scavBots.lootConfig.blacklist))"
                                          Validation="@(new Func<string, IEnumerable<string>>(Utils.TextObjectIDValidation))"
                                          Immediate="true"
                                          Adornment="Adornment.End"
                                          AdornmentIcon="@Icons.Material.Filled.ArrowRight"
                                          OnAdornmentClick="@(() => AddItemToList(_lootBlacklistEntryHolder, Data.scavBots.lootConfig.blacklist))" />
                        </MudItem>
                        <MudItem xs="6">
                            @foreach (var item in Data.scavBots.lootConfig.blacklist)
                            {
                                <MudChip Value="@item" T="string" OnClose="@(() => OnChipClosed(item, Data.scavBots.lootConfig.blacklist))" Color="Color.Default">@item</MudChip>
                            }
                        </MudItem>

                        <MudDivider DividerType="DividerType.FullWidth" Class="my-3" />

                        <MudItem xs="1" />
                        <MudItem xs="4">
                            <MudPaper Class="d-flex align-center mud-width-full ma-1" Elevation="0">
                                <MudTooltip Text="Allows random resource consumption on Food/Drink/Medical Items." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                    <MudText>Enable Resource Randomization</MudText>
                                </MudTooltip>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="6">
                            <MudPaper Class="d-flex align-center mud-width-full" Elevation="0">
                                <MudSwitch T="bool" @bind-Value="_enableScavResourceRandomization" Color="Color.Success" UncheckedColor="Color.Error" LabelPlacement="Placement.End">@_enableScavResourceRandomization</MudSwitch>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="1">
                            <MudButton @onclick="resetResourceRandomization" Variant="Variant.Filled" Color="Color.Dark" Size="Size.Small">Reset</MudButton>
                        </MudItem>

                        <MudItem xs="2" />
                        <MudItem xs="3">
                            <MudTooltip Text="Medical & Food full chances and minimum usage percent." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                <MudText>Medical & Food Values</MudText>
                            </MudTooltip>
                        </MudItem>
                        <MudItem xs="3">
                            <MudPaper Class="d-flex align-start mud-width-full" Style="margin-top: -13px;" Elevation="0">
                                <MudTooltip Text="Chance for medical items to be full resource usage." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                    <MudNumericField Margin="Margin.Dense" HideSpinButtons="true" @bind-Value="_scavMedRateMaxChance" Label="Full Chance" HelperText="Medical" Variant="Variant.Filled" Min="1" Max="100" Disabled="!_enableScavResourceRandomization" />
                                </MudTooltip>
                                <MudTooltip Text="Lowest percent possible for a medical item's usage to be." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                    <MudNumericField Margin="Margin.Dense" HideSpinButtons="true" @bind-Value="_scavMedRateUsagePercent" Label="Minimum %" HelperText="Medical" Variant="Variant.Filled" Min="1" Max="100" Disabled="!_enableScavResourceRandomization" />
                                </MudTooltip>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="3">
                            <MudPaper Class="d-flex align-start mud-width-full" Style="margin-top: -13px;" Elevation="0">
                                <MudTooltip Text="Chance for food/drink items to be full resource usage." Color="Color.Secondary" Placement="Placement.Left" Arrow="true">
                                    <MudNumericField Margin="Margin.Dense" HideSpinButtons="true" @bind-Value="_scavFoodRateMaxChance" Label="Full Chance" HelperText="Food/Drink" Variant="Variant.Filled" Min="1" Max="100" Disabled="!_enableScavResourceRandomization" />
                                </MudTooltip>
                                <MudTooltip Text="Lowest percent possible for a food/drink item's usage to be." Color="Color.Secondary" Placement="Placement.Left" Arrow="true">
                                    <MudNumericField Margin="Margin.Dense" HideSpinButtons="true" @bind-Value="_scavFoodRateUsagePercent" Label="Minimum %" HelperText="Food/Drink" Variant="Variant.Filled" Min="1" Max="100" Disabled="!_enableScavResourceRandomization" />
                                </MudTooltip>
                                <MudSpacer />
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="1" />

                        <MudItem xs="1" />
                        <MudItem xs="4">
                            <MudTooltip Text="Adjust Scav bot Weapon Durability." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                <MudText>Weapon Durability</MudText>
                            </MudTooltip>
                        </MudItem>
                        <MudItem xs="2">
                            <MudPaper Class="d-flex align-start mud-width-full" Style="margin-top: -13px;" Elevation="0">
                                <MudTooltip Text="Lowest a weapon's 'non-repairable' durability can be." Color="Color.Secondary" Placement="Placement.Bottom" Arrow="true">
                                    <MudNumericField Margin="Margin.Dense" HideSpinButtons="true" @bind-Value="_scavWeaponDurabilityMin" Label="Min" HelperText="Durability" Variant="Variant.Filled"
                                                     Min="0"
                                                     Max="_scavWeaponDurabilityMax" />
                                </MudTooltip>
                                <MudTooltip Text="Highest a weapon's 'non-repairable' durability can be." Color="Color.Secondary" Placement="Placement.Bottom" Arrow="true">
                                    <MudNumericField Margin="Margin.Dense" HideSpinButtons="true" @bind-Value="_scavWeaponDurabilityMax" Label="Max" HelperText="Durability" Variant="Variant.Filled"
                                                     Min="_scavWeaponDurabilityMin"
                                                     Max="100" />
                                </MudTooltip>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="2">
                            <MudPaper Class="d-flex align-start mud-width-full" Style="margin-top: -13px;" Elevation="0">
                                <MudTooltip Text="Lowest possible difference from the rolled 'non-repairable' durabilty to the 'current' durability." Color="Color.Secondary" Placement="Placement.Bottom" Arrow="true">
                                    <MudNumericField Margin="Margin.Dense" HideSpinButtons="true" @bind-Value="_scavWeaponDurabilityMinDelta" Label="Min" HelperText="Delta" Variant="Variant.Filled"
                                                     Min="0"
                                                     Max="100"
                                                     Validation="@(new Func<int, bool>(ValidateDelta))" />
                                </MudTooltip>
                                <MudTooltip Text="Highest possible difference from the rolled 'non-repairable' durabilty to the 'current' durability." Color="Color.Secondary" Placement="Placement.Bottom" Arrow="true">
                                    <MudNumericField Margin="Margin.Dense" HideSpinButtons="true" @bind-Value="_scavWeaponDurabilityMaxDelta" Label="Max" HelperText="Delta" Variant="Variant.Filled"
                                                     Min="0"
                                                     Max="100"
                                                     Validation="@(new Func<int, bool>(ValidateDelta))" />
                                </MudTooltip>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="2">
                            <MudPaper Class="d-flex align-start mud-width-full" Style="margin-top: -13px;" Elevation="0">
                                <MudTooltip Text="Lowest Possible Current Durability Roll." Color="Color.Secondary" Placement="Placement.Bottom" Arrow="true">
                                    <MudNumericField Disabled Margin="Margin.Dense" HideSpinButtons="true" @bind-Value="_scavWeaponDurabilityMinLimitPercent" Label="Min" HelperText="Actual" Variant="Variant.Filled"
                                                     Min="0"
                                                     Max="100" />
                                </MudTooltip>
                                <MudTooltip Text="Highest Possible Current Durability Roll." Color="Color.Secondary" Placement="Placement.Bottom" Arrow="true">
                                    <MudNumericField Disabled Margin="Margin.Dense" HideSpinButtons="true" @bind-Value="_scavWeaponDurabilityMaxLimitPercent" Label="Max" HelperText="Actual" Variant="Variant.Filled"
                                                     Min="0"
                                                     Max="100" />
                                </MudTooltip>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="1">
                            <MudButton @onclick="resetWeaponDurability" Variant="Variant.Filled" Color="Color.Dark" Size="Size.Small">Reset</MudButton>
                        </MudItem>

                        <MudItem xs="1" />
                        <MudItem xs="4">
                            <MudPaper Class="d-flex align-center mud-width-full ma-1" Elevation="0">
                                <MudTooltip Text="Adds all keys to existing scav loot pool." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                    <MudText>Add All Keys</MudText>
                                </MudTooltip>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="6">
                            <MudPaper Class="d-flex align-center mud-width-full" Elevation="0">
                                <MudSwitch T="bool" Disabled="(_addOnlyKeyCardsToScavs || _addOnlyMechanicalKeysToScavs) ? true : false" @bind-Value="_addAllKeysToScavs" Color="Color.Success" UncheckedColor="Color.Error" LabelPlacement="Placement.End">@_addAllKeysToScavs</MudSwitch>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="1">
                            <MudButton @onclick="resetScavAllKeys" Variant="Variant.Filled" Color="Color.Dark" Size="Size.Small">Reset</MudButton>
                        </MudItem>

                        <MudItem xs="1" />
                        <MudItem xs="4">
                            <MudPaper Class="d-flex align-center mud-width-full ma-1" Elevation="0">
                                <MudTooltip Text="Adds all mechanical keys to existing scav loot pool." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                    <MudText>Add Only Mechanical Keys</MudText>
                                </MudTooltip>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="6">
                            <MudPaper Class="d-flex align-center mud-width-full" Elevation="0">
                                <MudSwitch T="bool" Disabled="(_addOnlyKeyCardsToScavs || _addAllKeysToScavs) ? true : false" @bind-Value="_addOnlyMechanicalKeysToScavs" Color="Color.Success" UncheckedColor="Color.Error" LabelPlacement="Placement.End">@_addOnlyMechanicalKeysToScavs</MudSwitch>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="1">
                            <MudButton @onclick="resetScavMechanicalKeys" Variant="Variant.Filled" Color="Color.Dark" Size="Size.Small">Reset</MudButton>
                        </MudItem>

                        <MudItem xs="1" />
                        <MudItem xs="4">
                            <MudPaper Class="d-flex align-center mud-width-full ma-1" Elevation="0">
                                <MudTooltip Text="Adds all keycards to existing scav loot pool." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                    <MudText>Add Only Keycards</MudText>
                                </MudTooltip>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="6">
                            <MudPaper Class="d-flex align-center mud-width-full" Elevation="0">
                                <MudSwitch T="bool" Disabled="(_addOnlyMechanicalKeysToScavs || _addAllKeysToScavs) ? true : false" @bind-Value="_addOnlyKeyCardsToScavs" Color="Color.Success" UncheckedColor="Color.Error" LabelPlacement="Placement.End">@_addOnlyKeyCardsToScavs</MudSwitch>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="1">
                            <MudButton @onclick="resetScavKeyCards" Variant="Variant.Filled" Color="Color.Dark" Size="Size.Small">Reset</MudButton>
                        </MudItem>

                        <MudItem xs="1" />
                        <MudItem xs="4">
                            <MudPaper Class="d-flex align-center mud-width-full ma-1" Elevation="0">
                                <MudTooltip Text="Allows Scavs to use tiered attachments instead of always Tier 1." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                    <MudText>Enable Scav Attachment Tiering</MudText>
                                </MudTooltip>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="6">
                            <MudPaper Class="d-flex align-center mud-width-full" Elevation="0">
                                <MudSwitch T="bool" @bind-Value="_enableScavAttachmentTiering" Color="Color.Success" UncheckedColor="Color.Error" LabelPlacement="Placement.End">@_enableScavAttachmentTiering</MudSwitch>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="1">
                            <MudButton @onclick="resetScavAttachmentTiering" Variant="Variant.Filled" Color="Color.Dark" Size="Size.Small">Reset</MudButton>
                        </MudItem>

                        <MudItem xs="1" />
                        <MudItem xs="4">
                            <MudPaper Class="d-flex align-center mud-width-full ma-1" Elevation="0">
                                <MudTooltip Text="By default scavs have a much lower chance to use good stuff. Enabling this means they have equal chance for every item available to them." Color="Color.Secondary" Placement="Placement.Right" Arrow="true">
                                    <MudText>Force Equal Equipment Chance</MudText>
                                </MudTooltip>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="6">
                            <MudPaper Class="d-flex align-center mud-width-full" Elevation="0">
                                <MudSwitch T="bool" @bind-Value="_enableScavEqualEquipmentTiering" Color="Color.Success" UncheckedColor="Color.Error" LabelPlacement="Placement.End">@_enableScavEqualEquipmentTiering</MudSwitch>
                            </MudPaper>
                        </MudItem>
                        <MudItem xs="1">
                            <MudButton @onclick="resetScavEquipmentTiering" Variant="Variant.Filled" Color="Color.Dark" Size="Size.Small">Reset</MudButton>
                        </MudItem>

                    </MudGrid>
                </MudExpansionPanel>
            }
        </MudExpansionPanels>
    </MudContainer>
</MudMainContent>

@code {
    #region ENABLE / DISABLE
    private bool _enableScavBots
    {
        get => Data.scavBots.enable;
        set
        {
            Utils.UpdateViewBool(value, Data.scavBots.enable);
            Data.scavBots.enable = value;
        }
    }
    private void resetScavBots() => Data.scavBots.enable = true;
    #endregion
    #region DURABILITY
    private int _scavWeaponDurabilityMin
    {
        get => Data.scavBots.weaponDurability.min;
        set
        {
            Utils.UpdateViewInt(value, Data.scavBots.weaponDurability.min);
            Data.scavBots.weaponDurability.minLimitPercent = value - Data.scavBots.weaponDurability.maxDelta;
            Data.scavBots.weaponDurability.min = value;
        }
    }
    private int _scavWeaponDurabilityMax
    {
        get => Data.scavBots.weaponDurability.max;
        set
        {
            Utils.UpdateViewInt(value, Data.scavBots.weaponDurability.max);
            Data.scavBots.weaponDurability.max = value;
        }
    }
    private int _scavWeaponDurabilityMinDelta
    {
        get => Data.scavBots.weaponDurability.minDelta;
        set
        {
            Utils.UpdateViewInt(value, Data.scavBots.weaponDurability.minDelta);
            Data.scavBots.weaponDurability.minDelta = value;
        }
    }
    private int _scavWeaponDurabilityMaxDelta
    {
        get => Data.scavBots.weaponDurability.maxDelta;
        set
        {
            Utils.UpdateViewInt(value, Data.scavBots.weaponDurability.maxDelta);
            Data.scavBots.weaponDurability.minLimitPercent = Data.scavBots.weaponDurability.min - value;
            Data.scavBots.weaponDurability.maxDelta = value;
        }
    }
    private int _scavWeaponDurabilityMinLimitPercent
    {
        get => Data.scavBots.weaponDurability.minLimitPercent;
        set { }
    }
    private int _scavWeaponDurabilityMaxLimitPercent
    {
        get => Data.scavBots.weaponDurability.max - Data.scavBots.weaponDurability.minDelta;
        set { }
    }

    private void resetWeaponDurability()
    {
        Data.scavBots.weaponDurability.min = 70;
        Data.scavBots.weaponDurability.max = 90;
        Data.scavBots.weaponDurability.minDelta = 5;
        Data.scavBots.weaponDurability.maxDelta = 20;
        Data.scavBots.weaponDurability.minLimitPercent = Data.scavBots.weaponDurability.min - Data.scavBots.weaponDurability.maxDelta;
    }
    #endregion
    #region RESOURCE RANDOMIZATION
    private bool _enableScavResourceRandomization
    {
        get => Data.scavBots.resourceRandomization.enable;
        set
        {
            Utils.UpdateViewBool(value, Data.scavBots.resourceRandomization.enable);
            Data.scavBots.resourceRandomization.enable = value;
        }
    }
    private int _scavFoodRateMaxChance
    {
        get => Data.scavBots.resourceRandomization.foodRateMaxChance;
        set
        {
            Utils.UpdateViewInt(value, Data.scavBots.resourceRandomization.foodRateMaxChance);
            Data.scavBots.resourceRandomization.foodRateMaxChance = value;
        }
    }
    private int _scavFoodRateUsagePercent
    {
        get => Data.scavBots.resourceRandomization.foodRateUsagePercent;
        set
        {
            Utils.UpdateViewInt(value, Data.scavBots.resourceRandomization.foodRateUsagePercent);
            Data.scavBots.resourceRandomization.foodRateUsagePercent = value;
        }
    }
    private int _scavMedRateMaxChance
    {
        get => Data.scavBots.resourceRandomization.medRateMaxChance;
        set
        {
            Utils.UpdateViewInt(value, Data.scavBots.resourceRandomization.medRateMaxChance);
            Data.scavBots.resourceRandomization.medRateMaxChance = value;
        }
    }
    private int _scavMedRateUsagePercent
    {
        get => Data.scavBots.resourceRandomization.medRateUsagePercent;
        set
        {
            Utils.UpdateViewInt(value, Data.scavBots.resourceRandomization.medRateUsagePercent);
            Data.scavBots.resourceRandomization.medRateUsagePercent = value;
        }
    }
    private void resetResourceRandomization()
    {
        Data.scavBots.resourceRandomization.enable = true;
        Data.scavBots.resourceRandomization.foodRateMaxChance = 10;
        Data.scavBots.resourceRandomization.foodRateUsagePercent = 10;
        Data.scavBots.resourceRandomization.medRateMaxChance = 10;
        Data.scavBots.resourceRandomization.medRateUsagePercent = 10;
    }
    #endregion
    #region LOOT
    private bool _enableLoot
    {
        get => Data.scavBots.lootConfig.enable;
        set
        {
            Utils.UpdateViewBool(value, Data.scavBots.lootConfig.enable);
            Data.scavBots.lootConfig.enable = value;
        }
    }
    private string _lootBlacklistEntryHolder { get; set; } = "";

    private void resetLoot()
    {
        Data.scavBots.lootConfig.enable = true;
        Data.scavBots.lootConfig.blacklist = [];
    }
    #endregion
    #region KEYS
    private bool _addAllKeysToScavs
    {
        get => Data.scavBots.keyConfig.addAllKeysToScavs;
        set
        {
            Utils.UpdateViewBool(value, Data.scavBots.keyConfig.addAllKeysToScavs);
            Data.scavBots.keyConfig.addAllKeysToScavs = value;
        }
    }
    private void resetScavAllKeys() => Data.scavBots.keyConfig.addAllKeysToScavs = false;

    private bool _addOnlyMechanicalKeysToScavs
    {
        get => Data.scavBots.keyConfig.addOnlyMechanicalKeysToScavs;
        set
        {
            Utils.UpdateViewBool(value, Data.scavBots.keyConfig.addOnlyMechanicalKeysToScavs);
            Data.scavBots.keyConfig.addOnlyMechanicalKeysToScavs = value;
        }
    }
    private void resetScavMechanicalKeys() => Data.scavBots.keyConfig.addOnlyMechanicalKeysToScavs = false;

    private bool _addOnlyKeyCardsToScavs
    {
        get => Data.scavBots.keyConfig.addOnlyKeyCardsToScavs;
        set
        {
            Utils.UpdateViewBool(value, Data.scavBots.keyConfig.addOnlyKeyCardsToScavs);
            Data.scavBots.keyConfig.addOnlyKeyCardsToScavs = value;
        }
    }
    private void resetScavKeyCards() => Data.scavBots.keyConfig.addOnlyKeyCardsToScavs = false;
    #endregion
    #region OTHER
    private bool _enableScavAttachmentTiering
    {
        get => Data.scavBots.additionalOptions.enableScavAttachmentTiering;
        set
        {
            Utils.UpdateViewBool(value, Data.scavBots.additionalOptions.enableScavAttachmentTiering);
            Data.scavBots.additionalOptions.enableScavAttachmentTiering = value;
        }
    }
    private void resetScavAttachmentTiering() => Data.scavBots.additionalOptions.enableScavAttachmentTiering = false;

    private bool _enableScavEqualEquipmentTiering
    {
        get => Data.scavBots.additionalOptions.enableScavEqualEquipmentTiering;
        set
        {
            Utils.UpdateViewBool(value, Data.scavBots.additionalOptions.enableScavEqualEquipmentTiering);
            Data.scavBots.additionalOptions.enableScavEqualEquipmentTiering = value;
        }
    }
    private void resetScavEquipmentTiering() => Data.scavBots.additionalOptions.enableScavEqualEquipmentTiering = false;
    #endregion

    #region INPUT HANDLING
    private void HandleKeyDown(KeyboardEventArgs e, string value, List<string> list)
    {
        if (e.Key == "Enter" && !e.ShiftKey)
        {
            AddItemToList(value, list);
        }
    }

    private void AddItemToList(string value, List<string> list)
    {
        if (value != null)
        {
            bool containsAlready = list.FirstOrDefault(s => s.Contains(value)) == value ? true : false;
            if (!containsAlready && Utils.IsHexAndValidLength(value))
            {
                list.Add(value);
                MainLayout.EnableUnsavedChangesButton();
            }
            else if (containsAlready)
            {
                Snackbar.Add("Already blacklisted.", Severity.Error, config => { config.ShowCloseIcon = false; });
            }
            else
            {
                Snackbar.Add("Invalid MongoID.", Severity.Error, config => { config.ShowCloseIcon = false; });
            }
        }
    }

    private void OnChipClosed(string item, List<string> list)
    {
        if (item != null)
        {
            list.Remove(item);
            MainLayout.EnableUnsavedChangesButton();
        }
    }
    public bool ValidateDelta(int value)
    {
        if (_scavWeaponDurabilityMinLimitPercent < _scavWeaponDurabilityMaxLimitPercent)
        {
            return true;
        }
        return false;
    }
    #endregion

    #region CASCADING PARAMETERS
    [CascadingParameter] public APBSConfig.Shared.MainLayout? Layout { get; set; }
    #endregion
}